# 阶段 3: 数据模型实现

## 状态

⚪ 待开始

## 目标

定义系统核心数据结构，包括环境感知数据（Environment）和氛围方案（AmbiencePlan）。

**重要**：基于重构后的设计，所有数据模型使用 Java 21 Record + @Description 注解。

## 前置依赖

- [x] 阶段 2: 设计文档（含重构）
- [x] 参考：`docs/design/refactoring-guide.md` Phase 1

## 任务清单

### Environment 模型

- [ ] 定义 Environment 类/Record
  - `gpsTag`: 地理标签（高架桥、隧道、郊区公路等）
  - `weather`: 天气（晴/阴/雨/雪/雾）
  - `speed`: 车速（0-200 km/h）
  - `userMood`: 用户情绪（happy/calm/tired/stressed/excited）
  - `timeOfDay`: 时段（dawn/morning/noon/afternoon/evening/night/midnight）
  - `passengerCount`: 乘客数量（1-7）
  - `routeType`: 路线类型（highway/urban/mountain/coastal/tunnel）
- [ ] 编写 JSON Schema 文档
- [ ] 实现 JSON 序列化/反序列化

### AmbiencePlan 模型

- [ ] 定义 AmbiencePlan 类/Record
  - `musicRecommendation`: 音乐推荐（歌曲列表、BPM、流派）
  - `lightSetting`: 灯光设置（色温、颜色、亮度）
  - `narrative`: 串词文本
  - `scentSetting`: 香氛设置（类型、浓度）
  - `seatSetting`: 座椅设置（按摩模式、强度）
- [ ] 定义子模型（MusicRecommendation、LightSetting 等）

### 枚举类型

- [ ] 定义 Weather 枚举
- [ ] 定义 UserMood 枚举
- [ ] 定义 TimeOfDay 枚举
- [ ] 定义 RouteType 枚举

### 验证与测试

- [ ] 添加 Bean Validation 注解
- [ ] 编写单元测试

## 相关文件

```
src/main/java/com/vibe/model/
├── Environment.java
├── AmbiencePlan.java
├── MusicRecommendation.java
├── LightSetting.java
├── enums/
│   ├── Weather.java
│   ├── UserMood.java
│   ├── TimeOfDay.java
│   └── RouteType.java
```

## 完成标准

- [ ] 所有模型类定义完成
- [ ] JSON 序列化/反序列化测试通过
- [ ] 代码已提交到 Git

## 问题与笔记

（开发过程中遇到的问题和解决方案记录在这里）
