# é˜¶æ®µ 3: æ•°æ®æ¨¡å‹å®ç°

## çŠ¶æ€

ğŸŸ¡ è¿›è¡Œä¸­ (30%)

## ç›®æ ‡

å®šä¹‰ç³»ç»Ÿæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬ç¯å¢ƒæ„ŸçŸ¥æ•°æ®ï¼ˆEnvironmentï¼‰å’Œæ°›å›´æ–¹æ¡ˆï¼ˆAmbiencePlanï¼‰ã€‚

**é‡è¦**ï¼šåŸºäºé‡æ„åçš„è®¾è®¡ï¼Œæ‰€æœ‰æ•°æ®æ¨¡å‹ä½¿ç”¨ Java 21 Record + @Description æ³¨è§£ã€‚

## å‰ç½®ä¾èµ–

- [x] é˜¶æ®µ 2: è®¾è®¡æ–‡æ¡£ï¼ˆå«é‡æ„ï¼‰
- [x] å‚è€ƒï¼š`docs/design/refactoring-guide.md` Phase 1

## ä»»åŠ¡æ¸…å•

### Environment æ¨¡å‹

- [ ] å®šä¹‰ Environment ç±»/Record
  - `gpsTag`: åœ°ç†æ ‡ç­¾ï¼ˆé«˜æ¶æ¡¥ã€éš§é“ã€éƒŠåŒºå…¬è·¯ç­‰ï¼‰
  - `weather`: å¤©æ°”ï¼ˆæ™´/é˜´/é›¨/é›ª/é›¾ï¼‰
  - `speed`: è½¦é€Ÿï¼ˆ0-200 km/hï¼‰
  - `userMood`: ç”¨æˆ·æƒ…ç»ªï¼ˆhappy/calm/tired/stressed/excitedï¼‰
  - `timeOfDay`: æ—¶æ®µï¼ˆdawn/morning/noon/afternoon/evening/night/midnightï¼‰
  - `passengerCount`: ä¹˜å®¢æ•°é‡ï¼ˆ1-7ï¼‰
  - `routeType`: è·¯çº¿ç±»å‹ï¼ˆhighway/urban/mountain/coastal/tunnelï¼‰
- [ ] ç¼–å†™ JSON Schema æ–‡æ¡£
- [ ] å®ç° JSON åºåˆ—åŒ–/ååºåˆ—åŒ–

### AmbiencePlan æ¨¡å‹

- [ ] å®šä¹‰ AmbiencePlan ç±»/Record
  - `musicRecommendation`: éŸ³ä¹æ¨èï¼ˆæ­Œæ›²åˆ—è¡¨ã€BPMã€æµæ´¾ï¼‰
  - `lightSetting`: ç¯å…‰è®¾ç½®ï¼ˆè‰²æ¸©ã€é¢œè‰²ã€äº®åº¦ï¼‰
  - `narrative`: ä¸²è¯æ–‡æœ¬
  - `scentSetting`: é¦™æ°›è®¾ç½®ï¼ˆç±»å‹ã€æµ“åº¦ï¼‰
  - `seatSetting`: åº§æ¤…è®¾ç½®ï¼ˆæŒ‰æ‘©æ¨¡å¼ã€å¼ºåº¦ï¼‰
- [ ] å®šä¹‰å­æ¨¡å‹ï¼ˆMusicRecommendationã€LightSetting ç­‰ï¼‰

### æšä¸¾ç±»å‹

- [x] å®šä¹‰ GpsTag æšä¸¾ âœ…
- [x] å®šä¹‰ Weather æšä¸¾ âœ…
- [x] å®šä¹‰ UserMood æšä¸¾ âœ…
- [x] å®šä¹‰ TimeOfDay æšä¸¾ âœ…
- [x] å®šä¹‰ RouteType æšä¸¾ âœ…
- [x] å®šä¹‰ SafetyMode æšä¸¾ âœ…
- [x] å®šä¹‰ LightMode æšä¸¾ âœ…
- [x] å®šä¹‰ NarrativeEmotion æšä¸¾ âœ…

### éªŒè¯ä¸æµ‹è¯•

- [ ] æ·»åŠ  Bean Validation æ³¨è§£
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

## ç›¸å…³æ–‡ä»¶

```
src/main/java/com/vibe/model/
â”œâ”€â”€ Environment.java
â”œâ”€â”€ AmbiencePlan.java
â”œâ”€â”€ MusicRecommendation.java
â”œâ”€â”€ LightSetting.java
â”œâ”€â”€ enums/
â”‚   â”œâ”€â”€ Weather.java
â”‚   â”œâ”€â”€ UserMood.java
â”‚   â”œâ”€â”€ TimeOfDay.java
â”‚   â””â”€â”€ RouteType.java
```

## å®Œæˆæ ‡å‡†

- [ ] æ‰€æœ‰æ¨¡å‹ç±»å®šä¹‰å®Œæˆ
- [ ] JSON åºåˆ—åŒ–/ååºåˆ—åŒ–æµ‹è¯•é€šè¿‡
- [ ] ä»£ç å·²æäº¤åˆ° Git

## é—®é¢˜ä¸ç¬”è®°

ï¼ˆå¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆè®°å½•åœ¨è¿™é‡Œï¼‰
