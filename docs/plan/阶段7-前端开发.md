# 阶段 7: 前端开发

## 状态

⚪ 待开始

## 目标

开发车载横屏 UI，实现氛围可视化和 Agent 思维链展示。

## 前置依赖

- [x] 阶段 6: API 与 Mock（需要后端 API 可用）

## 任务清单

### 页面布局

- [ ] 设计车载横屏布局（16:9 或 21:9）
- [ ] 实现响应式适配
- [ ] 创建主要区域划分
  - 左侧：环境信息展示
  - 中间：氛围可视化（灯光动效）
  - 右侧：音乐播放器 + 串词展示
  - 底部：Agent 思维链

### 环境信息展示

- [ ] 显示当前环境数据
  - GPS 标签、天气、车速
  - 时段、乘客数量、路线类型
- [ ] 用户情绪选择器
- [ ] 环境数据实时更新

### 氛围灯可视化（Three.js）

- [ ] 创建 3D 场景（模拟车内视角）
- [ ] 实现氛围灯动效
  - 颜色渐变
  - 呼吸灯效果
  - 流光效果
- [ ] 根据 LightSetting 实时更新灯光

### 音乐播放器

- [ ] 显示当前播放歌曲信息
- [ ] 播放列表展示
- [ ] 播放控制（上一首/下一首/暂停）
- [ ] 进度条

### 串词展示

- [ ] 显示 Agent 生成的串词
- [ ] 打字机效果展示
- [ ] TTS 播放按钮（可选）

### Agent 思维链展示

- [ ] 显示 Agent 的推理过程
- [ ] 展示调用了哪些工具
- [ ] 展示每个工具的输入输出
- [ ] 折叠/展开功能

### API 集成

- [ ] 封装 API 调用服务
- [ ] 实现状态管理（React Context / Zustand）
- [ ] 处理加载状态和错误状态
- [ ] WebSocket 连接（可选）

### 演示模式

- [ ] 实现一键演示功能
- [ ] 自动切换不同场景
- [ ] 展示"环境变 → Vibe 变"的效果

## 相关文件

```
vibe-drive-frontend/src/
├── components/
│   ├── EnvironmentPanel.tsx      # 环境信息
│   ├── AmbienceVisualizer.tsx    # 氛围灯 3D 可视化
│   ├── MusicPlayer.tsx           # 音乐播放器
│   ├── NarrativeDisplay.tsx      # 串词展示
│   └── ThinkingChain.tsx         # 思维链展示
├── services/
│   └── api.ts                    # API 调用
├── stores/
│   └── vibeStore.ts              # 状态管理
├── App.tsx
└── main.tsx
```

## 完成标准

- [ ] UI 界面完整，适配车载横屏
- [ ] 氛围灯动效流畅（≥ 30 FPS）
- [ ] Agent 思维链可视化清晰
- [ ] 演示模式可正常运行
- [ ] 代码已提交到 Git

## 问题与笔记

（开发过程中遇到的问题和解决方案记录在这里）
