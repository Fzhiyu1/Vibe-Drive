# Vibe Drive å‰ç«¯ç•Œé¢è®¾è®¡

## 1. æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰ Vibe Drive è½¦è½½æ¨ªå± UI çš„ç•Œé¢è®¾è®¡ï¼ŒåŒ…æ‹¬å¸ƒå±€ã€ç»„ä»¶å’Œäº¤äº’è§„èŒƒã€‚

### 1.1 è®¾è®¡åŸåˆ™

- **å®‰å…¨ä¼˜å…ˆ**ï¼šä¸å¹²æ‰°é©¾é©¶ï¼Œä¿¡æ¯å±‚çº§æ¸…æ™°
- **æ²‰æµ¸ä½“éªŒ**ï¼šæ°›å›´ç¯åŠ¨æ•ˆä¸éŸ³ä¹è”åŠ¨
- **ç®€æ´ç›´è§‚**ï¼šå¤§å­—ä½“ã€å¤§æŒ‰é’®ã€æ˜“æ“ä½œ
- **å“åº”å¼**ï¼šé€‚é…ä¸åŒè½¦è½½å±å¹•å°ºå¯¸

### 1.2 ç›®æ ‡å±å¹•

- **ä¸»è¦**ï¼šè½¦è½½æ¨ªå± 1920Ã—720 / 1280Ã—480
- **æ¬¡è¦**ï¼šå¹³æ¿æ¨ªå± 1024Ã—768

---

## 2. é¡µé¢å¸ƒå±€

### 2.1 æ•´ä½“å¸ƒå±€ï¼ˆæ¨ªå±ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              é¡¶éƒ¨çŠ¶æ€æ  (60px)                           â”‚
â”‚  [å®‰å…¨æ¨¡å¼æŒ‡ç¤º]              [æ—¶é—´]              [ç¯å¢ƒçŠ¶æ€]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     â”‚  â”‚                                         â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚                                         â”‚  â”‚
â”‚  â”‚    æ°›å›´ç¯å¯è§†åŒ–      â”‚  â”‚           éŸ³ä¹æ’­æ”¾åŒºåŸŸ                   â”‚  â”‚
â”‚  â”‚    (Three.js)       â”‚  â”‚                                         â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚    400Ã—400          â”‚  â”‚  â”‚         ä¸“è¾‘å°é¢                 â”‚   â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚  â”‚         200Ã—200                 â”‚   â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚                                         â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚  æ­Œæ›²åç§° - è‰ºæœ¯å®¶                       â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚  02:35 â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 04:12   â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚                                         â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚     [ä¸Šä¸€é¦–]  [æ’­æ”¾/æš‚åœ]  [ä¸‹ä¸€é¦–]      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              åº•éƒ¨ä¿¡æ¯æ  (80px)                           â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ’¬ "å¤œæ·±äº†ï¼Œçª—å¤–çš„é›¨å£°å’Œè¿™é¦–æ­Œå¾ˆé…ï¼Œè®©éŸ³ä¹é™ªä½ å®‰å…¨åˆ°å®¶ã€‚"        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  [ç¯å¢ƒ: é«˜é€ŸÂ·é›¨å¤©Â·æ·±å¤œ]     [Agent çŠ¶æ€: è¿è¡Œä¸­]     [è®¾ç½®]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 åŒºåŸŸè¯´æ˜

| åŒºåŸŸ | å°ºå¯¸ | è¯´æ˜ |
|------|------|------|
| é¡¶éƒ¨çŠ¶æ€æ  | 100% Ã— 60px | å®‰å…¨æ¨¡å¼ã€æ—¶é—´ã€ç¯å¢ƒæ¦‚è§ˆ |
| æ°›å›´ç¯åŒºåŸŸ | 400px Ã— 400px | Three.js 3D ç¯å…‰å¯è§†åŒ– |
| éŸ³ä¹æ’­æ”¾åŒº | å‰©ä½™å®½åº¦ | å°é¢ã€æ­Œæ›²ä¿¡æ¯ã€æ§åˆ¶æŒ‰é’® |
| åº•éƒ¨ä¿¡æ¯æ  | 100% Ã— 80px | å™äº‹æ–‡æœ¬ã€ç¯å¢ƒæ ‡ç­¾ã€è®¾ç½®å…¥å£ |

---

## 3. ç»„ä»¶è®¾è®¡

### 3.1 å®‰å…¨æ¨¡å¼æŒ‡ç¤ºå™¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L1 æ­£å¸¸æ¨¡å¼                        â”‚  â† ç»¿è‰²èƒŒæ™¯
â”‚  â— å…¨åŠŸèƒ½å¼€æ”¾                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L2 ä¸“æ³¨æ¨¡å¼                        â”‚  â† é»„è‰²èƒŒæ™¯
â”‚  âš  å·²ç¦ç”¨è§†è§‰åŠ¨æ•ˆ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L3 é™é»˜æ¨¡å¼                        â”‚  â† çº¢è‰²èƒŒæ™¯
â”‚  ğŸ”‡ é«˜é€Ÿè¡Œé©¶ä¸­                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**React ç»„ä»¶**

```tsx
interface SafetyModeIndicatorProps {
  mode: 'L1_NORMAL' | 'L2_FOCUS' | 'L3_SILENT';
  speed: number;
}

const SafetyModeIndicator: React.FC<SafetyModeIndicatorProps> = ({ mode, speed }) => {
  const config = {
    L1_NORMAL: { label: 'æ­£å¸¸æ¨¡å¼', color: '#4CAF50', icon: 'â—' },
    L2_FOCUS: { label: 'ä¸“æ³¨æ¨¡å¼', color: '#FFC107', icon: 'âš ' },
    L3_SILENT: { label: 'é™é»˜æ¨¡å¼', color: '#F44336', icon: 'ğŸ”‡' },
  };

  const { label, color, icon } = config[mode];

  return (
    <div className="safety-indicator" style={{ backgroundColor: color }}>
      <span className="icon">{icon}</span>
      <span className="label">{label}</span>
      <span className="speed">{speed} km/h</span>
    </div>
  );
};
```

### 3.2 æ°›å›´ç¯å¯è§†åŒ–ï¼ˆThree.jsï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®               â”‚
â”‚          â•±           â•²              â”‚
â”‚         â”‚   â—‰ å…‰æº    â”‚             â”‚
â”‚          â•²           â•±              â”‚
â”‚           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯               â”‚
â”‚                                     â”‚
â”‚      å‘¼å¸æ•ˆæœ / æ¸å˜æ•ˆæœ / è„‰å†²      â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**React Three Fiber ç»„ä»¶**

```tsx
import { Canvas } from '@react-three/fiber';
import { OrbitControls } from '@react-three/drei';

interface AmbienceLightProps {
  color: string;
  brightness: number;
  mode: 'static' | 'breathing' | 'gradient' | 'pulse';
}

const AmbienceLight: React.FC<AmbienceLightProps> = ({ color, brightness, mode }) => {
  return (
    <Canvas>
      <ambientLight intensity={0.1} />
      <pointLight position={[0, 0, 0]} color={color} intensity={brightness / 100} />
      <mesh>
        <sphereGeometry args={[1, 32, 32]} />
        <meshStandardMaterial
          color={color}
          emissive={color}
          emissiveIntensity={brightness / 100}
          transparent
          opacity={0.8}
        />
      </mesh>
      <OrbitControls enableZoom={false} enablePan={false} />
    </Canvas>
  );
};
```

### 3.3 éŸ³ä¹æ’­æ”¾å™¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                     â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚         â”‚                     â”‚                     â”‚
â”‚         â”‚    ğŸµ ä¸“è¾‘å°é¢       â”‚                     â”‚
â”‚         â”‚                     â”‚                     â”‚
â”‚         â”‚    200 Ã— 200        â”‚                     â”‚
â”‚         â”‚                     â”‚                     â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                     â”‚
â”‚              å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ                          â”‚
â”‚              é€ƒè·‘è®¡åˆ’ Â· ä¸–ç•Œ                         â”‚
â”‚                                                     â”‚
â”‚    02:35 â”â”â”â”â”â”â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 04:12          â”‚
â”‚                                                     â”‚
â”‚         â®ï¸        â–¶ï¸ / â¸ï¸        â­ï¸                â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**React ç»„ä»¶**

```tsx
interface MusicPlayerProps {
  song: {
    title: string;
    artist: string;
    album: string;
    coverUrl: string;
    duration: number;
  };
  currentTime: number;
  isPlaying: boolean;
  onPlay: () => void;
  onPause: () => void;
  onNext: () => void;
  onPrevious: () => void;
}

const MusicPlayer: React.FC<MusicPlayerProps> = ({
  song,
  currentTime,
  isPlaying,
  onPlay,
  onPause,
  onNext,
  onPrevious,
}) => {
  return (
    <div className="music-player">
      <img src={song.coverUrl} alt={song.album} className="cover" />
      <div className="info">
        <h2 className="title">{song.title}</h2>
        <p className="artist">{song.artist} Â· {song.album}</p>
      </div>
      <div className="progress">
        <span>{formatTime(currentTime)}</span>
        <input
          type="range"
          min={0}
          max={song.duration}
          value={currentTime}
          className="slider"
        />
        <span>{formatTime(song.duration)}</span>
      </div>
      <div className="controls">
        <button onClick={onPrevious}>â®ï¸</button>
        <button onClick={isPlaying ? onPause : onPlay}>
          {isPlaying ? 'â¸ï¸' : 'â–¶ï¸'}
        </button>
        <button onClick={onNext}>â­ï¸</button>
      </div>
    </div>
  );
};
```

### 3.4 å™äº‹æ–‡æœ¬å±•ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚  ğŸ’¬ "å¤œæ·±äº†ï¼Œçª—å¤–çš„é›¨å£°å’Œè¿™é¦–æ­Œå¾ˆé…ï¼Œè®©éŸ³ä¹é™ªä½ å®‰å…¨åˆ°å®¶ã€‚"           â”‚
â”‚                                                                     â”‚
â”‚                                              â”€â”€ Vibe Drive          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**React ç»„ä»¶**

```tsx
interface NarrativeDisplayProps {
  text: string;
  isVisible: boolean;
  onDismiss: () => void;
}

const NarrativeDisplay: React.FC<NarrativeDisplayProps> = ({
  text,
  isVisible,
  onDismiss,
}) => {
  if (!isVisible) return null;

  return (
    <div className="narrative-display" onClick={onDismiss}>
      <span className="icon">ğŸ’¬</span>
      <p className="text">"{text}"</p>
      <span className="signature">â”€â”€ Vibe Drive</span>
    </div>
  );
};
```

### 3.5 ç¯å¢ƒçŠ¶æ€æ ‡ç­¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ›£ï¸ é«˜é€Ÿå…¬è·¯  â”‚  ğŸŒ§ï¸ é›¨å¤©  â”‚  ğŸŒ™ æ·±å¤œ  â”‚  ğŸ˜´ ç–²åŠ³   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**React ç»„ä»¶**

```tsx
interface EnvironmentTagsProps {
  environment: {
    gpsTag: string;
    weather: string;
    timeOfDay: string;
    userMood: string;
  };
}

const EnvironmentTags: React.FC<EnvironmentTagsProps> = ({ environment }) => {
  const tags = [
    { icon: getGpsIcon(environment.gpsTag), label: getGpsLabel(environment.gpsTag) },
    { icon: getWeatherIcon(environment.weather), label: getWeatherLabel(environment.weather) },
    { icon: getTimeIcon(environment.timeOfDay), label: getTimeLabel(environment.timeOfDay) },
    { icon: getMoodIcon(environment.userMood), label: getMoodLabel(environment.userMood) },
  ];

  return (
    <div className="environment-tags">
      {tags.map((tag, index) => (
        <span key={index} className="tag">
          {tag.icon} {tag.label}
        </span>
      ))}
    </div>
  );
};
```

---

## 4. äº¤äº’è®¾è®¡

### 4.1 æ°›å›´åˆ‡æ¢åŠ¨ç”»

```
å½“å‰æ°›å›´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ æ–°æ°›å›´
         â”‚                    â”‚
         â”‚  æ·¡å‡º (500ms)      â”‚
         â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’     â”‚
         â”‚                    â”‚
         â”‚  æ·¡å…¥ (500ms)      â”‚
         â”‚  â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
         â”‚                    â”‚
```

### 4.2 å®‰å…¨æ¨¡å¼åˆ‡æ¢

```
L1 â†’ L2:
  - ç¯å…‰åŠ¨æ•ˆåœæ­¢ï¼Œè¿‡æ¸¡åˆ°é™æ€
  - æ˜¾ç¤ºæç¤ºï¼š"å·²è¿›å…¥ä¸“æ³¨æ¨¡å¼"

L2 â†’ L3:
  - ç¯å…‰åŒºåŸŸå˜æš—
  - æ˜¾ç¤ºæç¤ºï¼š"é«˜é€Ÿè¡Œé©¶ä¸­ï¼Œå·²è¿›å…¥é™é»˜æ¨¡å¼"
  - å™äº‹æ–‡æœ¬éŸ³é‡é™ä½

L3 â†’ L1:
  - ç¯å…‰åŒºåŸŸæ¢å¤
  - æ˜¾ç¤ºæç¤ºï¼š"å·²æ¢å¤æ­£å¸¸æ¨¡å¼"
```

### 4.3 æ‰‹åŠ¿æ“ä½œ

| æ‰‹åŠ¿ | æ“ä½œ |
|------|------|
| å·¦æ»‘ | ä¸‹ä¸€é¦– |
| å³æ»‘ | ä¸Šä¸€é¦– |
| ç‚¹å‡»å™äº‹æ–‡æœ¬ | å…³é—­/é‡æ’­ |
| é•¿æŒ‰ç¯å…‰åŒºåŸŸ | æ‰“å¼€ç¯å…‰è®¾ç½® |

---

## 5. è°ƒè¯•é¢æ¿ï¼ˆå¼€å‘æ¨¡å¼ï¼‰

### 5.1 å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [è°ƒè¯•é¢æ¿]                                                    [æ”¶èµ· â–¼] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ç¯å¢ƒæ¨¡æ‹Ÿå™¨                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ GPS: [é«˜é€Ÿå…¬è·¯ â–¼]  å¤©æ°”: [é›¨å¤© â–¼]  è½¦é€Ÿ: [====â—====] 85 km/h    â”‚   â”‚
â”‚  â”‚ æƒ…ç»ª: [ç–²åŠ³ â–¼]     æ—¶æ®µ: [æ·±å¤œ â–¼]  ä¹˜å®¢: [1 â–¼]                  â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚ [åº”ç”¨ç¯å¢ƒ]  [éšæœºç”Ÿæˆ]  [é¢„è®¾åœºæ™¯ â–¼]                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  Agent æ¨ç†è¿‡ç¨‹                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ£€æµ‹åˆ°æ·±å¤œ+é›¨å¤©+ç–²åŠ³çŠ¶æ€ï¼Œç”¨æˆ·éœ€è¦æ”¾æ¾èˆ’ç¼“çš„æ°›å›´...              â”‚   â”‚
â”‚  â”‚ é€‰æ‹©èˆ’ç¼“çš„çˆµå£«ä¹å¸®åŠ©æ”¾æ¾ä½†ä¸è‡³äºæ˜æ˜æ¬²ç¡...                      â”‚   â”‚
â”‚  â”‚ è½¦é€Ÿ 85km/h å¤„äº L2 ä¸“æ³¨æ¨¡å¼ï¼Œç¦ç”¨åŠ¨æ€ç¯å…‰...                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  API æ—¥å¿—                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [10:30:01] POST /api/vibe/analyze - 200 OK (1850ms)             â”‚   â”‚
â”‚  â”‚ [10:30:01] Tool: recommend_music - 5 songs returned             â”‚   â”‚
â”‚  â”‚ [10:30:01] Tool: set_light - static mode applied                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 React ç»„ä»¶

```tsx
interface DebugPanelProps {
  isOpen: boolean;
  onToggle: () => void;
  environment: Environment;
  onEnvironmentChange: (env: Environment) => void;
  reasoning: string;
  apiLogs: ApiLog[];
}

const DebugPanel: React.FC<DebugPanelProps> = ({
  isOpen,
  onToggle,
  environment,
  onEnvironmentChange,
  reasoning,
  apiLogs,
}) => {
  const presets = [
    { id: 'midnight_rain', label: 'æ·±å¤œé›¨å¤©é«˜é€Ÿ' },
    { id: 'morning_sunny', label: 'æ—©æ™¨æ™´å¤©é€šå‹¤' },
    { id: 'family_trip', label: 'å‘¨æœ«å®¶åº­å‡ºæ¸¸' },
  ];

  return (
    <div className={`debug-panel ${isOpen ? 'open' : 'collapsed'}`}>
      <div className="header" onClick={onToggle}>
        <span>è°ƒè¯•é¢æ¿</span>
        <span>{isOpen ? 'â–¼' : 'â–²'}</span>
      </div>

      {isOpen && (
        <div className="content">
          <EnvironmentSimulator
            environment={environment}
            onChange={onEnvironmentChange}
            presets={presets}
          />

          <div className="section">
            <h3>Agent æ¨ç†è¿‡ç¨‹</h3>
            <pre className="reasoning">{reasoning}</pre>
          </div>

          <div className="section">
            <h3>API æ—¥å¿—</h3>
            <div className="logs">
              {apiLogs.map((log, i) => (
                <div key={i} className="log-entry">
                  [{log.timestamp}] {log.message}
                </div>
              ))}
            </div>
          </div>
        </div>
      )}
    </div>
  );
};
```

---

## 6. ç»„ä»¶ç»“æ„

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ Header.tsx           # é¡¶éƒ¨çŠ¶æ€æ 
â”‚   â”‚   â”œâ”€â”€ Footer.tsx           # åº•éƒ¨ä¿¡æ¯æ 
â”‚   â”‚   â””â”€â”€ MainLayout.tsx       # ä¸»å¸ƒå±€
â”‚   â”‚
â”‚   â”œâ”€â”€ ambience/
â”‚   â”‚   â”œâ”€â”€ AmbienceLight.tsx    # æ°›å›´ç¯ 3D å¯è§†åŒ–
â”‚   â”‚   â”œâ”€â”€ LightPreview.tsx     # ç¯å…‰é¢„è§ˆ
â”‚   â”‚   â””â”€â”€ LightSettings.tsx    # ç¯å…‰è®¾ç½®é¢æ¿
â”‚   â”‚
â”‚   â”œâ”€â”€ music/
â”‚   â”‚   â”œâ”€â”€ MusicPlayer.tsx      # éŸ³ä¹æ’­æ”¾å™¨
â”‚   â”‚   â”œâ”€â”€ SongInfo.tsx         # æ­Œæ›²ä¿¡æ¯
â”‚   â”‚   â”œâ”€â”€ ProgressBar.tsx      # è¿›åº¦æ¡
â”‚   â”‚   â””â”€â”€ PlaylistDrawer.tsx   # æ’­æ”¾åˆ—è¡¨æŠ½å±‰
â”‚   â”‚
â”‚   â”œâ”€â”€ status/
â”‚   â”‚   â”œâ”€â”€ SafetyModeIndicator.tsx  # å®‰å…¨æ¨¡å¼æŒ‡ç¤º
â”‚   â”‚   â”œâ”€â”€ EnvironmentTags.tsx      # ç¯å¢ƒæ ‡ç­¾
â”‚   â”‚   â””â”€â”€ AgentStatus.tsx          # Agent çŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ narrative/
â”‚   â”‚   â”œâ”€â”€ NarrativeDisplay.tsx     # å™äº‹æ–‡æœ¬å±•ç¤º
â”‚   â”‚   â””â”€â”€ NarrativeHistory.tsx     # å™äº‹å†å²
â”‚   â”‚
â”‚   â””â”€â”€ debug/
â”‚       â”œâ”€â”€ DebugPanel.tsx           # è°ƒè¯•é¢æ¿
â”‚       â”œâ”€â”€ EnvironmentSimulator.tsx # ç¯å¢ƒæ¨¡æ‹Ÿå™¨
â”‚       â””â”€â”€ ApiLogger.tsx            # API æ—¥å¿—
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useVibe.ts               # Vibe API è°ƒç”¨
â”‚   â”œâ”€â”€ useSseEvents.ts          # SSE äº‹ä»¶è®¢é˜…
â”‚   â”œâ”€â”€ useAmbience.ts           # æ°›å›´çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ useEnvironment.ts        # ç¯å¢ƒæ•°æ®ç®¡ç†
â”‚
â”œâ”€â”€ store/
â”‚   â”œâ”€â”€ vibeStore.ts             # Zustand çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ types.ts                 # ç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ vibeApi.ts               # API æœåŠ¡
â”‚   â””â”€â”€ sse.ts                   # SSE æœåŠ¡
â”‚
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ global.css               # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ variables.css            # CSS å˜é‡
â”‚   â””â”€â”€ components/              # ç»„ä»¶æ ·å¼
â”‚
â””â”€â”€ App.tsx                      # ä¸»åº”ç”¨
```

---

## 7. æ ·å¼è§„èŒƒ

### 7.1 é¢œè‰²ç³»ç»Ÿ

```css
:root {
  /* ä¸»è‰²è°ƒ */
  --primary: #6366F1;
  --primary-light: #818CF8;
  --primary-dark: #4F46E5;

  /* å®‰å…¨æ¨¡å¼é¢œè‰² */
  --safety-l1: #4CAF50;  /* ç»¿è‰² - æ­£å¸¸ */
  --safety-l2: #FFC107;  /* é»„è‰² - ä¸“æ³¨ */
  --safety-l3: #F44336;  /* çº¢è‰² - é™é»˜ */

  /* èƒŒæ™¯ */
  --bg-primary: #0F0F0F;
  --bg-secondary: #1A1A1A;
  --bg-card: #252525;

  /* æ–‡å­— */
  --text-primary: #FFFFFF;
  --text-secondary: #A0A0A0;
  --text-muted: #666666;

  /* æ°›å›´ç¯é¢„è®¾ */
  --light-warm: #FFE4B5;
  --light-cool: #87CEEB;
  --light-energy: #FFD700;
  --light-calm: #98FB98;
}
```

### 7.2 å­—ä½“è§„èŒƒ

```css
:root {
  --font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;

  /* å­—å· */
  --font-size-xs: 12px;
  --font-size-sm: 14px;
  --font-size-md: 16px;
  --font-size-lg: 20px;
  --font-size-xl: 24px;
  --font-size-2xl: 32px;

  /* è¡Œé«˜ */
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --line-height-loose: 1.8;
}

/* è½¦è½½å±å¹•ä¼˜åŒ–ï¼šå¤§å­—ä½“ */
.car-display {
  font-size: var(--font-size-lg);
}

.car-display .title {
  font-size: var(--font-size-2xl);
  font-weight: 600;
}
```

### 7.3 é—´è·è§„èŒƒ

```css
:root {
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;
  --spacing-2xl: 48px;
}
```

---

## 8. å“åº”å¼é€‚é…

### 8.1 æ–­ç‚¹å®šä¹‰

```css
/* è½¦è½½å±å¹• */
@media (min-width: 1280px) {
  /* å¤§å±è½¦æœº 1920Ã—720 */
}

@media (min-width: 1024px) and (max-width: 1279px) {
  /* ä¸­å±è½¦æœº 1280Ã—480 */
}

@media (max-width: 1023px) {
  /* å¹³æ¿/å°å± */
}
```

### 8.2 å¸ƒå±€é€‚é…

```tsx
const useResponsiveLayout = () => {
  const [layout, setLayout] = useState<'large' | 'medium' | 'small'>('large');

  useEffect(() => {
    const updateLayout = () => {
      const width = window.innerWidth;
      if (width >= 1280) setLayout('large');
      else if (width >= 1024) setLayout('medium');
      else setLayout('small');
    };

    updateLayout();
    window.addEventListener('resize', updateLayout);
    return () => window.removeEventListener('resize', updateLayout);
  }, []);

  return layout;
};
```

---

## 9. æ€§èƒ½ä¼˜åŒ–

### 9.1 Three.js ä¼˜åŒ–

```tsx
// é™ä½æ¸²æŸ“é¢‘ç‡ï¼ˆL2/L3 æ¨¡å¼ï¼‰
const AmbienceLight: React.FC<Props> = ({ mode }) => {
  const frameLimit = mode === 'L1_NORMAL' ? 60 : 30;

  return (
    <Canvas frameloop={mode === 'L3_SILENT' ? 'demand' : 'always'}>
      {/* ... */}
    </Canvas>
  );
};
```

### 9.2 ç»„ä»¶æ‡’åŠ è½½

```tsx
const DebugPanel = lazy(() => import('./components/debug/DebugPanel'));

// ä»…å¼€å‘æ¨¡å¼åŠ è½½
{process.env.NODE_ENV === 'development' && (
  <Suspense fallback={null}>
    <DebugPanel />
  </Suspense>
)}
```

---

## 10. æ— éšœç¢è®¾è®¡

### 10.1 è¯­éŸ³åé¦ˆ

```tsx
// å®‰å…¨æ¨¡å¼åˆ‡æ¢æ—¶çš„è¯­éŸ³æç¤º
const useSafetyModeAnnouncement = (mode: SafetyMode) => {
  useEffect(() => {
    const messages = {
      L1_NORMAL: 'å·²æ¢å¤æ­£å¸¸æ¨¡å¼',
      L2_FOCUS: 'å·²è¿›å…¥ä¸“æ³¨æ¨¡å¼ï¼Œè§†è§‰æ•ˆæœå·²ç¦ç”¨',
      L3_SILENT: 'é«˜é€Ÿè¡Œé©¶ä¸­ï¼Œå·²è¿›å…¥é™é»˜æ¨¡å¼',
    };

    // ä½¿ç”¨ TTS æˆ–å±å¹•é˜…è¯»å™¨
    announce(messages[mode]);
  }, [mode]);
};
```

### 10.2 é«˜å¯¹æ¯”åº¦æ¨¡å¼

```css
@media (prefers-contrast: high) {
  :root {
    --bg-primary: #000000;
    --text-primary: #FFFFFF;
    --safety-l1: #00FF00;
    --safety-l2: #FFFF00;
    --safety-l3: #FF0000;
  }
}
```
